## reference[https://blog.csdn.net/bryan__/article/details/47114165?from=groupmessage&isappinstalled=0]
- 题目一句话：根据13年7月到14年8月的申购赎回数据预测14年9月每一天的申购赎回数据。

### 算法问题：
此题可以使用线性回归和时间序列预测，只要特征好效果都还可以。我们使用的是R下面的随机森林+LM  ，决赛只有4次提交机会，第一次我们26名，后面每天都降，这些火箭简直太可怕了，最后天我们运气好稳定在了47名。后来问过那些火箭才知道他们使用的是STL时间序列预测，因为这个方法预测的值偏大，刚好答案也是偏大。所以会出现大量火箭。

### 预处理问题：
题目给出的是每天用户的操作数据，我们需要按日期汇总为申购赎回数据，因为提交结果也是按天的汇总下来好像是427条，观察之后可以发现13年到14年前期都不太稳定，所以我们可以取稳定后的数据，3-8或者4-8月都可以。
另外既然取了3-8月的数据，就代表没有去年国庆前期的数据了，这个问题比较大，因为需要预测14年9月的，9月末的数据跟13年9月的数据趋势有相关性。但是13年9月的数据变化比较剧烈，由于比赛不准单点，没法自己去插入14年9月30号这天的数据，怎么办呢？我们前期测了下20140930的值，和9月29的值比例大概是11:9-11:8的样子。所以我们手动在训练集中插入了一调20130930的申购赎回数据来拟合14年预测结果。不知道这样还算不算调单点？

### 特征问题：
官方给出的baseline是使用了星期的7个特征使用LM建模。我们分析过数据后发现跟星期并没强烈相关性，反而更上班休假有强烈相关性（第一赛季其实是跟股票有强烈相关，第二赛季数据量大倒没多大影响了）
所以我们设计了如下特征：
- 一周正常第1/5天上班， 周末第1/2天，休假第1/3天，休假前/后正常上班的一天
- 上班前一天休假[上班前一天的休假]，工作日，休假，月初月中月末（10天周期），每月第一天
- 上一个波峰/波谷是几天前
- 上班最后天后要放几天假（2-3,7 3个01特征）
- 上班第一天前放了几天假（2-3 2个01特征）
- 两天的假，三天的假
- 周日补班 [周一放假]
- 股票波浪理论，135浪
另外所有特征均为01特征，为什么这样做大家可以自行思考下。

### 得分
- 其中19个特征在part1的时候纯lm可以达到203分
- 所有特征在PART2的时候lm+RF可以达到201分

## column
report_date,weekday,工作日,周末第1/2天,每月第一天,月初,月中,月末,一周正常第1/5天上班,上班前一天休假,休假,两天的假,上班第一天前放了2天假,上班最后一天后要放3天假,三天的假,上班第一天前放了3天假,休假第1/3天,休假前/后正常上班的一天,上班最后一天后要放2天假,上班最后一天后要放7天假,周日补班,total_purchase_amt,total_redeem_amt
report_date,weekday,workday,weekend,1st,early,middle,late,mon_or_fri_work,day_after_holiday,holiday,holiday_2,day_after_holiday_2,day_before_holiday_3,holiday_3,day_after_holiday_3,holiday_1st_or_3rd,day_before_or_after_holiday_normal_work,day_before_holiday_2,day_before_holiday_7,sunday_work,total_purchase_amt,total_redeem_amt
## holiday[http://www.gov.cn/zwgk/2013-12/11/content_2546204.htm]
国务院办公厅关于2014年
部分节假日安排的通知
国办发明电〔2013〕28号
各省、自治区、直辖市人民政府，国务院各部委、各直属机构：
　　经国务院批准，现将2014年元旦、春节、清明节、劳动节、端午节、中秋节和国庆节放假调休日期的具体安排通知如下。
　　一、元旦：1月1日放假1天。
　　二、春节：1月31日至2月6日放假调休，共7天。1月26日（星期日）、2月8日（星期六）上班。
　　三、清明节：4月5日放假，4月7日（星期一）补休。
　　四、劳动节：5月1日至3日放假调休，共3天。5月4日（星期日）上班。
　　五、端午节：6月2日放假，与周末连休。
　　六、中秋节：9月8日放假，与周末连休。
　　七、国庆节：10月1日至7日放假调休，共7天。9月28日（星期日）、10月11日（星期六）上班。
　　节假日期间，各地区、各部门要妥善安排好值班和安全、保卫等工作，遇有重大突发事件，要按规定及时报告并妥善处置，确保人民群众祥和平安度过节日假期。
　　　　　　　　　　　　　　　　　　　　　　　　 国务院办公厅
　　　　　　　　　　　　　　　　     　　　　　 2013年12月11日
